#include <iostream>
#include <queue>

using namespace std;

typedef unsigned long long ull;

int main(){
  int test;
  ull ferry_length;
  
  cin >> test;
  while( test-- > 0 ){
    queue<ull> left, right;
    int m;
    
    cin >> ferry_length >> m;
    ferry_length *= 100;
    while( m-- > 0 ){
      ull length;
      string side;
      cin >> length >> side;
      if( side == "right" ){
	right.push(length);
	//cout << ">> " << length << " - right" << endl;
      }else{
	left.push(length);
	//cout << ">> " << length << " - left" << endl;
      }
    }

    int travels = 0;
    while( !right.empty() || !left.empty() ){
      ull load = 0;
      while( !left.empty() && load + left.front() <= ferry_length ){
	load += left.front();
	left.pop();
      }
      //cout << "To right with " << load << endl;
      travels++;
      // Travels to the other side...
      load = 0;
      if( !left.empty() || !right.empty() ){
	while( !right.empty() && load + right.front() <= ferry_length ){
	  load += right.front();
	  right.pop();
	}
	// To the other side..
	travels++;
	//cout << "To left with " << load << endl;
      }
    }

    cout << travels << endl;
  }
  
  return 0;
}

// AC
